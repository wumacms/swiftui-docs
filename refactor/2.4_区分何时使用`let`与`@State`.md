# 区分何时使用`let`与`@State`

## 理解数据流的基础

在 SwiftUI 中，管理视图的数据是构建动态用户界面的核心。你可能会遇到 `let` 和 `@State` 这两种属性声明方式。它们各自扮演着独特的角色，理解它们的区别至关重要。正确选择可以显著提升你的代码质量和应用性能。🚀

## `let` 常量的力量

当你使用 `let` 声明一个属性时，你是在告诉 SwiftUI 这个值是不可变的。这意味着一旦它被初始化，就不能再被修改。

*   **不可变性**: `let` 属性非常适合那些在视图生命周期中保持不变的数据。例如，一个用户头像的 URL 或者一个商品的名称。
*   **性能优势**: 由于 `let` 属性不会改变，SwiftUI 可以对其进行优化，从而提高渲染效率。
*   **清晰意图**: 使用 `let` 明确表达了数据的只读性质，让你的代码更易于理解和维护。

> “在 SwiftUI 开发中，大约 70% 的数据传递场景可以通过 `let` 常量高效处理，因为它强调了数据的稳定性。”

## `@State` 的动态魔力

与 `let` 不同，`@State` 属性是可变的。它允许你在视图内部管理状态，并在状态改变时自动触发视图的重新渲染。

*   **内部状态**: `@State` 专为视图的私有、内部状态而设计。比如，一个开关的开启/关闭状态，或者一个计数器的当前值。
*   **视图更新**: 当 `@State` 变量的值发生变化时，SwiftUI 会自动检测到并重新渲染依赖该状态的视图部分。这使得构建交互式 UI 变得轻而易举。✨
*   **所有权**: `@State` 属性由视图本身“拥有”。这意味着它的生命周期与视图的生命周期紧密相连。

## 何时选择哪一个？

选择 `let` 还是 `@State` 取决于数据的性质和用途。

*   **使用 `let`**:
    *   当数据从父视图传递下来，并且在子视图中不需要被修改时。
    *   当数据是静态的，不会在视图的生命周期内改变时。
    *   例如，显示一个用户资料卡片，其中的用户名和头像通常是 `let`。

*   **使用 `@State`**:
    *   当数据是视图内部的，并且会随着用户交互而改变时。
    *   当你需要一个变量来控制 UI 的显示状态时，比如一个模态视图的显示/隐藏。
    *   例如，一个点赞按钮的计数器，或者一个文本输入框的内容。

> 记住，`@State` 适用于视图的“私有”数据，而 `let` 则用于接收外部传入的“公共”数据。掌握这个区别，你就能构建出更健壮、更高效的 SwiftUI 应用！🥳
